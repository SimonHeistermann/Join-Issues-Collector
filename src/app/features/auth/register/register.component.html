<!-- Success Overlay -->
<div *ngIf="showSuccess()" class="success-overlay">
  <div class="success-message">
    You signed up successfully
  </div>
</div>

<div class="register-page">
  <header class="register-header">
    <div class="header-container">
      <a routerLink="/welcome" class="logo-container">
        <img src="assets/icons/logo_blue.png" alt="Join" class="logo" />
      </a>
    </div>
  </header>

  <main class="register-main">
    <div class="register-card">
      <button class="back-button" routerLink="/login">
        <img class="thin-back-button" src="assets/icons/arrow_left_icon_light_blue_thin.png" alt="Back" />
        <img class="thick-back-button" src="assets/icons/arrow_left_icon_light_blue_thick.png" alt="Back" />
      </button>

      <div class="register-headline">
        <h1>Sign up</h1>
        <div class="separator"></div>
      </div>

      <form class="register-form" (ngSubmit)="onSubmit()">
        <!-- Name Input -->
        <div class="input-group">
          <div class="input-container" [class.error]="nameError()">
            <input
              type="text"
              [(ngModel)]="name"
              name="name"
              placeholder="Name"
              class="input-field"
              (input)="clearError('name')"
            />
            <label>
              <img src="assets/icons/person_icon_gray.png" alt="" class="input-icon" />
            </label>
          </div>
          <span *ngIf="nameError()" class="error-message">{{ nameError() }}</span>
        </div>

        <!-- Email Input -->
        <div class="input-group">
          <div class="input-container" [class.error]="emailError()">
            <input
              type="email"
              [(ngModel)]="email"
              name="email"
              placeholder="Email"
              class="input-field"
              (input)="clearError('email')"
            />
            <label>
              <img src="assets/icons/mail_icon_gray.png" alt="" class="input-icon" />
            </label>
          </div>
          <span *ngIf="emailError()" class="error-message">{{ emailError() }}</span>
        </div>

        <!-- Password Input -->
        <div class="input-group">
          <div class="input-container" [class.error]="passwordError()">
            <input
              [type]="showPassword() ? 'text' : 'password'"
              [(ngModel)]="password"
              name="password"
              placeholder="Password"
              class="input-field"
              (input)="clearError('password')"
            />
            <label (click)="togglePassword()">
              <img
                *ngIf="password && password.length > 0"
                [src]="showPassword() ? 'assets/icons/eye_icon_gray.png' : 'assets/icons/visibility_off_icon_gray.png'"
                alt=""
                class="input-icon clickable"
              />
              <img
                *ngIf="!password || password.length === 0"
                src="assets/icons/lock_icon_gray.png"
                alt=""
                class="input-icon"
              />
            </label>
          </div>
          <span *ngIf="passwordError()" class="error-message">{{ passwordError() }}</span>
        </div>

        <!-- Confirm Password Input -->
        <div class="input-group">
          <div class="input-container" [class.error]="confirmPasswordError()">
            <input
              [type]="showConfirmPassword() ? 'text' : 'password'"
              [(ngModel)]="confirmPassword"
              name="confirmPassword"
              placeholder="Confirm Password"
              class="input-field"
              (input)="clearError('confirmPassword')"
            />
            <label (click)="toggleConfirmPassword()">
              <img
                *ngIf="confirmPassword && confirmPassword.length > 0"
                [src]="showConfirmPassword() ? 'assets/icons/eye_icon_gray.png' : 'assets/icons/visibility_off_icon_gray.png'"
                alt=""
                class="input-icon clickable"
              />
              <img
                *ngIf="!confirmPassword || confirmPassword.length === 0"
                src="assets/icons/lock_icon_gray.png"
                alt=""
                class="input-icon"
              />
            </label>
          </div>
          <span *ngIf="confirmPasswordError()" class="error-message">{{ confirmPasswordError() }}</span>
        </div>

        <!-- Privacy Policy Checkbox -->
        <div class="checkbox-group" [class.error]="privacyError()">
          <label class="checkbox-label">
            <input
              type="checkbox"
              [(ngModel)]="acceptPrivacy"
              name="acceptPrivacy"
              (change)="clearError('privacy')"
            />
            <span class="checkbox-custom"></span>
            <span class="checkbox-text">
              I accept the <a routerLink="/privacy-policy">Privacy policy</a>
            </span>
          </label>
          <span *ngIf="privacyError()" class="error-message">{{ privacyError() }}</span>
        </div>

        <button type="submit" class="signup-btn" [disabled]="isLoading()">
          {{ isLoading() ? 'Signing up...' : 'Sign up' }}
        </button>
      </form>
    </div>
  </main>

  <footer class="register-footer">
    <a routerLink="/privacy-policy">Privacy Policy</a>
    <a routerLink="/legal-notice">Legal notice</a>
  </footer>
</div>
